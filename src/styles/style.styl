@import '_normalize.styl'
@import '_variables.styl'
@import '_typography.styl'
@import '_animations.styl'

// stylint, Stylus' linter, doesn't lint anything inside this
// block
:global
  html, body, #root, main
    width: 100%
    height: 100%
  body
    background: offwhite
  .center
    margin: 0 auto
  .txt-center
    text-align: center
  .pointer
    cursor: pointer

  .m-t
    margin-top: 1.0rem
  .m-b
    margin-bottom: 1.0rem

  .error
    color: red

  .wrap-row
    flex-flow: row wrap
    justify-content: space-between

  .grid-figure
    flex-flow: row wrap
    flex: 0 0 calc(33.333% - 2rem)
    margin: 0 1rem 2rem 1rem
    // padding 2rem
    border: 1px solid lightgrey
    background: white
    position: relative

  ul
    margin-before: 0.5rem
    // li
  .editable
    outline: 0
  //   &:hover:after
  //     position: absolute
  //     top: 0
  //     right: 0
  //     font-size: 2.0rem
  //     font-weight: normal
  //     content: 'Editable'
  //     background-color: red
  //     padding: 2rem 0

  // For inline editable fields
  .invalid
    border: 1px solid darken(red, 20%)

  @media (max-width: cardWidth)
    .grid-figure
      flex-basis: calc(100% - 2rem)
      margin: 0 1rem .5rem 1rem

  .single
    max-width: cardWidth
    min-width: cardWidth
    flex-shrink: 0

  .single .grid-figure
    // Single stack
    box-shadow: 7px 7px 6px 1px rgba(0,0,0,0.05)

  @media (max-width: cardWidth)
    .single
      min-width: unset
      width: 100%
      > div:first-child
        flex: 1 1 auto

  /*
    Buttons
  */
  .control-buttons
    width: 100%
    flex-flow: row wrap
    .button
      flex: 1 1 auto
      margin-right: 1rem
    label
      // (n + 2 px) below accounts for the button border
      padding: calc(0.90rem + 2px) 2rem calc(0.90rem + 2px) 0
      margin: 0.50rem 0 // Matching .button's margin
  .control-buttons.horizontal
    display: flex
    flex-flow: row nowrap
    .button:last-child
      margin-right: 0
    .button:first-child
      margin-left: 0

  @media (max-width: cardWidth)
    .control-buttons.horizontal
      flex-flow: column nowrap

  button, .button
    border: 2px solid lightgrey
    border-radius: 0.5rem
    background: none
    flex-basis: 50%
    display: inline-block
    text-decoration: none
    padding: 0.90rem 0.75rem
    margin: 0.50rem 0
    text-align: center
    color: blue
    transition: all 0.5s
    box-sizing: padding-box
    cursor: pointer
    user-select: none // Disallow selection of button text
    // Button sizing looks really off on Safari; hoping this will fix it
    // without any repercussions
    min-height: 40px
    &:hover, &:focus
      border-color: blue
      outline: 0
    &[disabled]
      color: lightgrey
      cursor: not-allowed
    &[disabled]:hover
      border-color: lightgrey

  .button.inverse
    background-color: blue
    border-color: blue
    color: white
    &:hover, &:focus
      background-color: darken(blue, 25%)
      border-color: blue
  .button.outline
    color blue
    border-color: blue
    &:hover, &:focus
      color: white
      border-color: desaturate(blue, 30%)
      background-color: desaturate(blue, 30%)

  .btn-inactive
    color: lightgrey
  .btn-active
    color: green
  .btn-delete
    color: red
    &:hover, &:focus
      border-color: red
  .btn-delete.outline
    color red
    border-color: red
    &:hover, &:focus
      color: white
      border-color: desaturate(red, 30%)
      background-color: desaturate(red, 30%)
  /*
    Forms
  */
  .edit-form
    padding: 2rem 2rem
    display: flex
    flex: 1 0 auto
    flex-flow: column nowrap
    > *
      flex: 0 0 auto
    > textarea
      flex: 1 0 auto

  input[type='text'],
  input[type='password'],
  textarea
    width: 100%
    border: 0
    padding: 1rem 0.5rem
    border-bottom: 1px solid lightgrey
    outline: none
    resize: vertical
    transition: all 0.2s
    opacity: 0.6
    &:hover
      opacity: 1
  label
    margin-top: 1rem
    > span
      padding-left: 0.5rem
      transition: all 0.2s
      color: #393939
      a, a.visited, a.active, a.link
        color: #393939

    > input[type='text'],
    > input[type='password'],
    > textarea
      margin-top: 0
    // &:hover > span,
    &:hover > span > a,
    &:hover > span > a.visited,
    &:hover > span > a.active,
    &:hover > span > a.link
      color: black
  label.no-pad > span
      padding: 0

  // Taken from https://github.com/michaelhue/keyscss/blob/master/keys.css
  kbd
    display: inline
    display: inline-block
    min-width: 1.25em
    padding: .3em .5em
    text-align: center
    text-decoration: none
    -moz-border-radius: .3em
    -webkit-border-radius: .3em
    border-radius: .3em
    border: none
    cursor: default
    -moz-user-select: none
    -webkit-user-select: none
    user-select: none

  kbd[title], .key[title]
    cursor: help

  kbd, kbd.light, .light-keys kbd, .key.light, .light-keys .key
    background: rgb(250, 250, 250);
    background: -moz-linear-gradient(top, rgb(210, 210, 210), rgb(255, 255, 255));
    background: -webkit-gradient(linear, left top, left bottom, from(rgb(210, 210, 210)), to(rgb(255, 255, 255)));
    color:  rgb(50, 50, 50);
    text-shadow: 0 0 2px rgb(255, 255, 255);
    -moz-box-shadow: inset 0 0 1px rgb(255, 255, 255), inset 0 0 .4em rgb(200, 200, 200), 0 .1em 0 rgb(130, 130, 130), 0 .11em 0 rgba(0, 0, 0, .4), 0 .1em .11em rgba(0, 0, 0, .9);
    -webkit-box-shadow: inset 0 0 1px rgb(255, 255, 255), inset 0 0 .4em rgb(200, 200, 200), 0 .1em 0 rgb(130, 130, 130), 0 .11em 0 rgba(0, 0, 0, .4), 0 .1em .11em rgba(0, 0, 0, .9);
    box-shadow: inset 0 0 1px rgb(255, 255, 255), inset 0 0 .4em rgb(200, 200, 200), 0 .1em 0 rgb(130, 130, 130), 0 .11em 0 rgba(0, 0, 0, .4), 0 .1em .11em rgba(0, 0, 0, .9);


  .ReactModal__Body--open
    overflow: hidden

  .ReactModal__Content:focus
    outline: 0

  // main.app-container

  section.main-container
    flex: 1 0 auto
    flex-direction: row
    order: 1
    justify-content: center
    section
      margin-top: contentMargin

  footer
    order: 3
    display: flex
    flex: 0 0 45px;
    flex-flow: row nowrap;
    justify-content: center

  @media (max-width: cardWidth)
    section.main-container section
      margin-top: 0.4rem
    footer
      display: none
